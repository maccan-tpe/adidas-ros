"use strict";var app={};app.partial={};var debug=/localhost[:]9000|nelson119.github.io/.test(location.href);$(function(){$.each(app.partial,function(t,e){e()}),app.imageReload.init(),$(window).on("scroll resizeend",function(t){$("#content").trigger("rolling",t)}),app.imageReload.callback=function(){anime.timeline({loop:!0,delay:500}).add({targets:"html",opacity:{value:1,duration:100},complete:function(){$("html").addClass("loading-done")}}),$("header .close").unbind("click").on("click",function(t){$(this).toggleClass("x")})},$(".menu a").on("click",function(t){$("header .close").removeClass("x")}),(new Image).onload=function(t){anime.timeline({loop:!0,delay:500}).add([{targets:".loading-mask .sportbase path",translateX:[-2e3,0,0,0,0,0,0,0,0,0,2e3],opacity:{value:1,duration:100},fill:"#fff",delay:function(t,e){return 0+75*e},duration:5e3,easing:"easeOutExpo",offset:0},{targets:".loading-mask polygon",rotateZ:[-720,0],opacity:{value:1,duration:100},fill:"#fff",delay:function(t,e){return 0+75*e},duration:1e3,easing:"easeOutExpo",offset:0},{duration:4e3}])}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};app.utility=new function(){$.fn.hasAttr=function(t){var e=$(this).attr(t);return"undefined"!==(void 0===e?"undefined":_typeof(e))&&!1!==e},this.share={facebook:function(t,e){t=encodeURIComponent(t||location.href+"?utm_source=facebook&utm_medium=fbshare_m&utm_campaign=camp"),e=encodeURIComponent(e||document.title),window.open("https://www.facebook.com/sharer.php?u="+t+"&amp;t="+e)},googleplus:function(t){t=encodeURIComponent(t||location.href+"?utm_source=g+&utm_medium=googleplus_m&utm_campaign=camp"),window.open("https://plus.google.com/share?url="+t,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},email:function(t,e){t=encodeURIComponent(t||location.href+"?utm_source=email&utm_medium=email_m&utm_campaign=camp"),e=encodeURIComponent(e||document.title);var a=encodeURIComponent(t+" #"+e);window.open("https://mail.google.com/mail/?view=cm&fs=1&to=&su=與你分享:"+e+"&body="+a+"&bcc=")}},this.getParam=function(t){var e=new RegExp("^.*[?&]"+t+"[=]([^&]+).*$","i");if(!e.test(location.search))return null;var a=location.search.replace(e,"$1");return decodeURIComponent(a)}};var BFHMonthsList=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],BFHDaysList=["日","一","二","三","四","五","六"],BFHDayOfWeekStart=1;app.partial.preload=function(){function t(t){function e(t){n[t]=!0;var e=!0;$.each(n,function(t,a){e=a&&e}),e&&a()}function a(){"function"==typeof app.imageReload.callback&&app.imageReload.callback()}var n={},i=[];$("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]").each(function(t,e){$(e).attr("data-src")&&(n[$(e).attr("data-src")]=!1,i.push(e))}),$.each(n,function(t,a){if(/\.svg$/.test(t))$.get(t,function(a){$(i).filter(function(){return t==$(this).attr("data-src")}).each(function(t,e){"img"===e.tagName.toLowerCase()?($("svg",a).clone().insertAfter(e),$(e).remove()):$(e).removeAttr("data-src").html($("svg",a).clone())});e(t)});else{var n=new Image;n.onload=function(){$(i).filter(function(){return t==$(this).attr("data-src")}).each(function(t,e){"img"===e.tagName.toLowerCase()?$(e).attr("src",$(e).attr("data-src")):$(e).css("background-image","url("+$(e).attr("data-src")+")")});e(t)},n.src=t}})}app.dementions={mobile:!1,desktop:!1},app.imageReload={init:function(){$(window).on("resize",function(e){$("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]").length&&$(window).width()<=768?t():$("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]").length&&$(window).width()>768?t():app.imageReload.callback(),$("#content").trigger("resizeend",e)}).trigger("resize")},refresh:function(){$(window).trigger("resize")},callback:function(){}}},app.partial.spa=function(){function t(t,a,n,o,r){r=r||!1,i.trigger("page:preupdate"),r||location.pathname===t||$("html").removeClass("loading-done"),$.get(t,function(l){var c=c,s="";$(l).each(function(t,e){"og:title"===$(e).attr("property")&&(c=$(e).attr("content")),"container"===$(e).attr("role")&&(s=$("[role=content]",e)),"menu"===$(e).attr("role")&&$(".menu a",e).each(function(t){$("[role=menu] .menu a").eq(t).attr("data-href",$(this).attr("data-href"))})}),r||e({uri:t,name:a,menu:n,title:c},"update content"+t),i.html("").html(s).promise().done(function(t){$("a[data-href]",i).on("click",function(t){$("header .menu a[data-ref="+$(this).attr("data-ref")+"]").trigger("click",t)})}),(o||function(){})(),i.trigger("page:update:"+a,n),i.trigger("page:update",n)})}function e(t,e){console.log(t),t.title=t.title||o,document.title=t.title,history.pushState(t,t.title,t.uri)}var a=/localhost[:]9000/.test(location.href),n="/";/nelson\.works/gi.test(location.href)?n="http://nelson.works/adidas-ros/":/maccan-tpe\.github\.io/gi.test(location.href)?n="https://maccan-tpe.github.io/adidas-ros/":/www\.adidas-campaign\.com\.tw/gi.test(location.href)?n="http://www.adidas-campaign.com.tw/heretocreate/event/":/tw2\.klear\.ly\/2017\/adidas-ros/gi.test(location.href)?n="http://tw2.klear.ly/2017/adidas-ros/":a&&(n="http://localhost:9000/"),app.utility.rootPath=n;var i=$("#container"),o=document.title;if(app.spa={container:i,title:o},$(window).on("popstate",function(e){if(/jeremy(\s|[%]20)lin/i.test(location.hash)||/wei[-]yin(\s|[%]20)chen/i.test(location.hash)||/rendy(\s|[%]20)lu/i.test(location.hash))return!1;var a=e.originalEvent.state;return null===a&&(location.href=n),document.title=a.title,t(a.uri,a.name,a.menu,function(){},!0),!0}),$("a[data-href]").on("click",function(e){if(e.stopPropagation(),e.preventDefault(),history.pushState){var a,i=$(this),o=i.attr("data-ref");switch(o){case"home":a=n+location.search+location.hash;break;default:a=n+o+"/"+location.search+location.hash}t(a,o,null,function(){if(/jeremy(\s|[%]20)lin/i.test(location.hash)||/wei[-]yin(\s|[%]20)chen/i.test(location.hash)||/rendy(\s|[%]20)lu/i.test(location.hash))return!1;anime({targets:"html,body",easing:"easeInOutExpo",scrollTop:0}),i.addClass("active").siblings().removeClass("active")})}else location.href=i.attr("data-href")}).on("mousemove",function(t){$(this).addClass("hover").siblings().removeClass("hover")}).on("mouseout",function(t){$(this).removeClass("hover")}),app.utility.getParam("path")){var r=decodeURIComponent(app.utility.getParam("path"));$("a[data-href="+r+"]").trigger("click")}i.on("page:update",function(t,e){$("html").addClass("loading-done"),app.imageReload.refresh()}),i.trigger("page:update","home")},app.partial.i18n=function(){$(".i18n .to").on("click",function(){if($(this).addClass("active").siblings().removeClass("active"),$("html").attr("lang")===$(this).attr("data-lang"))return!1;$("html").removeClass("loading-done"),$("html").attr("lang",$(this).attr("data-lang")),app.imageReload.refresh()});var t=$("html").attr("lang");t&&$(".i18n .to[data-lang="+t+"]").trigger("click")},app.partial.ga=function(){$("html").hasClass("mobile")||$("html").hasClass("tablet")?($("[data-ga-m]").on("click",function(t){ga("send","event","Button","click",$(this).attr("data-ga-m"))}),$(".kv, article.lin, article.chen, article.lu").on("section:active",function(){"undefined"!=typeof ga&&1*$(this).attr("data-ga-send")!=1&&ga("send","pageview",{page:$(this).attr("data-ga-pv-m"),title:$(this).attr("data-ga-pv-m")})}),$("#container").on("page:update:form",function(){ga("send","pageview",{page:"mobile_info",title:"mobile_info"})}),$("#container").on("page:update:rule",function(){ga("send","pageview",{page:"mobile_rules",title:"mobile_rules"})}),$("#container").on("page:update:home",function(){ga("send","pageview",{page:"Mobile_index",title:"Mobile_index"})}),$("#container").on("page:update:list",function(){ga("send","pageview",{page:"Mobile_list",title:"Mobile_list"})}),$("#container").on("page:update:winner",function(){ga("send","pageview",{page:"Mobile_winner",title:"Mobile_winner"})})):($("[data-ga]").on("click",function(t){$(this).attr("data-ga"),ga("send","event","Button","click",$(this).attr("data-ga"))}),$(".kv, article.lin, article.chen, article.lu").on("section:active",function(){"undefined"!=typeof ga&&1*$(this).attr("data-ga-send")!=1&&($(this).attr("data-ga-pv"),ga("send","pageview",{page:$(this).attr("data-ga-pv"),title:$(this).attr("data-ga-pv")}))}),$("#container").on("page:update:form",function(){ga("send","pageview",{page:"PC_info",title:"PC_info"})}),$("#container").on("page:update:rule",function(){ga("send","pageview",{page:"PC_rules",title:"PC_rules"})}),$("#container").on("page:update:home",function(){ga("send","pageview",{page:"PC_index",title:"PC_index"})}),$("#container").on("page:update:list",function(){ga("send","pageview",{page:"PC_list",title:"PC_list"})}),$("#container").on("page:update:winnner",function(){ga("send","pageview",{page:"PC_winnner",title:"PC_winnner"})}))};